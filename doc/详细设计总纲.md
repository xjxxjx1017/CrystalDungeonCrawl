


======================================================================

《游戏模式》

模式选择
  * 第零个模式 - 测试模式。
  * 第一代模式 - 大乱斗。把当前模式移动到这边，地图大小16x16。
  * 第二个模式 - 标准模式。

======================================================================

《营地与永久性强化》

玩家死亡之后，给玩家一个花费大量水晶，强化武器/自身能力的系统
* 用50蓝水晶增加剑Frenzy状态下的攻击力
* 用50蓝水晶增加剑类武器的耐久度
* 用100黄水晶增加弓箭对远处怪的攻击力
* （如果游戏引入视野遮挡）用50白水晶增加玩家视野
* 用100白水晶增加护盾耐久
五层等级的地图难度。花费巨量水晶比如1000，开启下一难度。下一难度更换一批怪，更换升级武器需要的水晶

用水晶来解锁圣剑（非常强力的剑，但是维护非常的贵）

玩家死亡之后,会回到营地，营地里有一个火堆。
小火可以去feed它的大火堆，用不同颜色的水晶。
feed得水晶颜色不同，会让火堆产生不同颜色的sparkling。
火堆会越来越大。
最后用白水晶做门框，火堆变成传送门，小火进去封神。

拜火教得reference：
拜火教在早期甚至没有神庙、祭坛、和祭祀，只有火坛。后期逐渐出现了神庙，但依然没有神像。

圣火分为好几个等级。普通人家供奉的火焰是最低级的，可以熄灭；第二级的圣火要从16种不同职业，同时信仰和言行都很纯洁的教徒家中供奉的火焰中提取火种，供奉在城市的神庙里，永不熄灭。最高级的胜利之火则是要从全国范围内千余个不同的家庭获得火种，然后再加上闪电击发的天火。伊朗个别地方的胜利之火据说已经保持了近两千年。传统上圣火都是用高级木材引燃并不断加入，后来似乎还出现了天然气的火焰，非常壮观。

=================================================================

《游戏版面上的机制》

武器能量有level，低了会被怪物的护盾挡下！（类似于怪物猎人的弹刀机制）
怪物的反击，与主动攻击的攻击力差别。被玩家攻击后会不停反击直到玩家离开。 如果怪物无法反击，则会进入Angry状态，从而寻找并接近玩家。
发现新格子可以回血。来到下一关可以回血。
preset的生成敌人的等级
彩色字暗示敌人等级
合成装备，充能stun2回合
护盾对水晶的消耗跟武器消耗的颜色相同

======================================================================

《水晶爆率》

根据武器类型爆水晶( 武器自己有水晶modifier )

越级打怪爆另色水晶，会变相放慢玩家对于当前武器的升级。但是会促进其它武器的解锁。
  * 越1级爆10%
  * 越2级爆30%
  * 越3级爆50%

boss永远会爆任意两种颜色的水晶。

======================================================================

《玩家动作》

玩家的Action
* 上下左右行走，能攻击则会触发攻击
* 武器的充能维护
* 无效攻击障碍物，可以略过一个回合

=============================================================

《关卡设计需求》

- 关卡设计的需求
16 = 7 + 5 + 4
16 = 6 + 5 + 5
16 = 6 + 6 + 4
16 = 4 + 4 + 4 + 4
也就是说，需要的设计大致为8x7, 8x6, 8x5, 8x4
假设有20关，则需要大概120个模块。若需要不出现重复的地图组合，则需要
假设玩家意识到关卡重复的条件为
1. 随机到了同一区域模块
2. 3个区域模块的排列组合跟之前遇到的相同
3. 假设每个模块的设计数目为N
4. 关卡数为M，则模块数目为6M
则玩家意识到关卡重复的概率为
1. 若M=100, N=5, 则没意识到重复的概率为（条件1）43%,（条件2）98.7% 
1. 若M=250, N=5, 则没意识到重复的概率为（条件1）43%,（条件2）92.3% 
1. 若M=1000, N=5, 则没意识到重复的概率为（条件1）67%,（条件2）27.5% 
1. 若M=1000, N=10, 则没意识到重复的概率为（条件1）67%,（条件2）98.7% 
1. 若M=1000, N=20, 则没意识到重复的概率为（条件1）82%,（条件2）99.9% 
1. 若M=1000, N=40, 则没意识到重复的概率为（条件1）91%,（条件2）99.9% 
由此可见，设计更多的关卡并不能让同一地图内出现同一区域模块的概率降低太多。
而玩家遇见相同区域配置的关卡的概率几乎为0，即使关卡设计的数量相当少。
需要程序化地避免使用同一区域生成关卡。

=====================================================================

《壶、徽章、房间和楼层》

4x4房间联通打墙，封闭，与等级算法。
房间的属性有，方向（左右上。不能同时出现两个上。如果是左右，则上为封闭。如果为上，则上为打通。），是否联通（联通算法没有踩到的格子为秘密房间）
把秘密房间，封闭或打通，加boss，加玩家应用到整个地图。

秘密房间
* 联通方式可以任意，最好有至少个方向是相通的。一层只能有一个秘密房间。秘密房间随楼层等级为3，4，5，6。
* 秘密房间内可以有一些怪，不过永远会有一个“壶”。打坏壶一定会出变态等级的怪。壶中怪的等级为随楼层分别为6，7，8，9。
* “壶！”，打破壶会出现。
    - 一堆gang
    - shadow
    - 等级奇高的angry怪
    - 壶中的怪只会爆白色水晶
    - 打破第一个壶，会爆一个“徽章”。
* “徽章！”，打爆第一个壶会出现。
    - 徽章能用白色水晶生成为带功能的徽章。
    - 玩家选择了一种徽章之后，其它升级徽章的可能则被遗弃。
    - 徽章以玩家的一个技能的形式出现，可以升级。
        * 怀表。时间停止：可连续行动5次
        * 硬体防御。可以完全抵挡N次伤害
        * 火环。对周围的敌人造成伤害
        * 恢复HP。立即恢复HP+持续恢复HP
普通房间
* 永远为四通。普通房间，怪物等级依楼层为1，2，3，4。
玩家房间
* 玩家房间初始便有白板武器，白板护盾，以及两块水晶
* 白板武器产生白水晶
Boss房间
* 永远为仅左右联通。
* Boss等级大致应该为10。Boss也会angry，angry会降低trample的值，让Boss提前被stun，然后变向。

《石壶》

*再次利用壶的概念*
地图上有很多石壶。在房间里被杀死的怪，变成的水晶都会被装入最临近 的一个“石壶”中。石壶被玩家击破，则会把已储存的水晶散落在地上。玩家捡起地上的一大堆水晶，玩家这时候便有一个极好的点，可以强化自己。

=====================================================================

《地图过程生成的方法》

地图的过程生成
  1. 中线划分，左右，或者上下。分成两块8x16的区域
  2. 把每一区域，再从长的一边切为长4~7大小的区域。如果出现1或2大小无法分割，则在任意位置Fill
  3. 若这关有BOSS，则用BOSS房间覆盖一个角落。
  4. 玩家则生成在BOSS的对角角落，或附近的边沿。清空玩家附近1格内的怪。
  5. 接着从模板里选择大小跟区域大小相同的设计，并应用。边角处的区域需要边角处的模块设计。
  6. 若没找到设计，则先寻找更小一些的设计。
  7. 若没找到，则生成考虑平衡性的的随机地形。
  8. 生成地图后计算路径，先确定玩家可以到达所有区域。如果不行，则报错。（在这个阶段还不能通过的模块。之后也许可以通过设计处理，比如可以挖墙，增加不同区域的奖励。当然也可以通过程序处理）

=================================================================================

《武器系统的重新思考》

？所以武器本身的特性是什么
- 决定玩家自身强度与当前的水晶维护消耗
- 反映了玩家角色的实力，跟玩家的游戏进度
- 决定玩家的行为模式
- 具有特色属性与稀有性

本命武器,小火一直拿的是本命武器，游戏开始时选择
临时武器,有特殊效果,或者威力强大的武器

小火升级,则是升级自己角色的特性

小火攻击,如果使用的是本命武器,会消耗自己的hp

hp靠脱离战斗后x回合,然后慢慢消耗水晶恢复。

玩家只能同时拥有1个临时武器。已装备的临时武器不会兑换任何资源

关于水晶:
蓝水晶为护盾回复(本命武器消耗护盾)
黄水晶为玩家经验值
红水晶为临时武器

壶只吸收附近水晶

玩家升级奖励
- （护盾会自动增加）
- 攻击强化。增加所有武器的攻击力、消耗
- 更加持久。增加所有武器的耐久度
- 增加本命武器的攻击力、消耗
- <如果有徽章>，选择徽章技能，或升级徽章

=================================================================================

《基础武器》

策划筛选，可以让程序快速编写写出的武器设计。
    冲刺矛，玩家攻击后会不由自主地往前方再进行一次移动或攻击
    弓箭，视野宽阔移动方向前方三格有敌人则会进行射击。在进程射击的话会收到伤害
    劈山斧，地形破坏，攻击前方三格，低充能，有cd。

======================================================================

《Crafting的平衡》

现在玩家需要Craft的次数是非常少的。
*想想在什么时候让玩家Crafting？*

* Crafting功能理想的使用频率
    1. 不足，游戏难度变高，力不从心
    2. 高效率，游戏玩得顺畅，但是总是有舍弃或者take risk的地方
    3. 过多，一时强大，但是之后由于维护因素变得难以维持

护盾的打造(蓝水晶5，护盾5）
   * 一次升级（蓝水晶5，护盾10）
   * 二次升级（蓝水晶10，护盾20）

初始剑的打造（攻击力2，最低攻击力1，充能2，充能花费2
   * 一次升级(蓝水晶8，att+1，充能3，充能花费4)
   * 重铸（两种不同颜色的杂水晶各3个，可过度充能，范围2格，充能3-5，充能花费4-8）

* 让能“打造”的receipt全开，然后其它升级路线初始隐藏

======================================================================

《Risk分析，升级预测曲线，难度曲线》

玩家在每个关卡的武器升级预测曲线
玩家在每个关卡的护盾升级预测曲线
玩家在每个关卡所需累计水晶曲线

玩家技巧对累计水晶曲线的影响。使用武器等级越高，累积水晶越少。使用武器等级越低，累积水晶越多。

玩家使用标准武器，过低武器，过高武器，分别计算累计水晶。
保证两关，或三关内，累计水晶会回到正常值。也就是说，两三关内，水晶累计的差值，会等于武器等级水晶需求的差值。

每一关的risk曲线，根据玩家武器护盾等级计算。
越往后面对risk的预期值是越高的。新手30%到普通100%到老手500%，boss关有risk spike。
老手应该可以负担更高级的武器。

根据risk需求，跟水晶累计需求，计算需要生成多少怪物，以及什么样的怪物。

从上面分析可以看出，武器等级跟水晶累积有关。而怪物设计则是为了配置出上面的曲线。

一些需要数值计算的项目
- 收入，支出与风险
* 针对每一个模块设计，用程序统计计算玩家的实际收入范围。（最佳效益，容错率与实际效益的关系）
* 上面的计算可能需要先计算每一个怪物的实际收入范围、最佳效益、容错率及收益关系。
* 设计计算怪物难度对玩家武器投入的要求。
* 设计护盾投入与容错率的关系。

=====================================================

《美术的第一版的需求》

*保守派美术风格*

整体风格参考RiftWizard
- TopDown的景物.地图
  * 石头.草地.森林.水.残木
- 特效与标志
  * 需要是三帧动画
- 战斗特效
  * 特效动画5帧。
- 怪物/玩家
  * 三帧怪物/玩家动画。怪物就算是上下动，左右伸缩，也需要动画。

需要更干净、醒目、define、的美术资源。现在的资源风格很好，还有优化的空间。

====================================================

《Camera》

Camera
用32x32像素显示地图，能看见的格子为7x7。玩家看到过的格子显示为半透明。

=================================================================================

《程序的架构》

程序的经验：
单位的抽象化为唯一的UnitMaster。单位的真正不同只有图片，AI，生成逻辑，跟配置文件。
怪物Factory。初始化怪物，应该用一系列参数就行，可以仅凭参数初始化出任意怪物。
维护很多怪物的AI函数。

=================================================================================

《已淘汰的关卡Plan》  *原因：怪物大都是被动，除非玩家主动攻击。如果按玩家强弱来配置敌人，则让游戏变得过于简单而无聊。过强过弱的敌人应该出现在同一地图上。*

1小时，也许20关，关卡内怪物的分布，及带给玩家的体验。叙述如下：
*先假象以每3关为一个分界线。总关卡与分界线可以以后调整*
1. 1~2 关（3分钟）
   * 上手、热身关。不熟悉的玩家可以探索游戏机制，熟悉的玩家可以积攒到一些稳定的水晶作资本。10%概率出现特殊版本的普通傻傻怪物。
2. 3~5 关（10分钟）
   * 需要小技巧的怪，小陷阱。
   * 每关出现boss的概率为20%，30%，100%。10%概率会出现强力的怪物。
3. 6~8 关（20分钟）
   * 需要小技巧的怪（类别2），陷阱。每一关都会有一处强力怪。10%概率会出现小技巧怪以下的特殊怪。
   * 假装玩家没有很care水晶的使用，50%的时候没有采用最高效率，则玩家的水晶应该在这一关开始吃紧，并且如果死亡了，不会积攒下多少水晶。
   * 如果玩家有过度升级装备，则虽然直到这关都会玩得很轻松，但从这时候开始，水晶会入不敷出。
4. 9~12 关（30分钟）
   * 需要技巧的怪，需要特别小心的陷阱。30%的怪会是强力怪，其余的是需要技巧的怪。10%概率会出现强力怪以下的特殊怪。
   * 每关出现boss的概率为20%，30%，100%。10%概率会出现强力的怪物。这关的boss会难缠很多。boss有20%几率会是强化版本。
   * 如果有特别的武器，在这几关会容易一些。如果没有特别注意武器的升级，则这机关会变得非常困难。正确的使用武器是这机关的关键。
5. 13~16 关（45分钟）
   * 阴险的陷阱到处都是，60%会是强力怪，其它时候是需要技巧的怪。20%概率会出现强力怪以下的特殊怪。
   * 所有事情做完美了，才能在这几关幸存。玩家对游戏的了解跟操作需要做到完美。
6. 17~20 关（1小时）
   * 过多的怪，过多的陷阱，不公平的敌我比例（比如20个史莱姆都在屏幕上）。20%概率会出现强力怪以下的特殊怪（由于怪的数量，这个概率可能会需要降低）。
   * 即使是完美主义的玩家，都需要碰运气，每一步都需要思考，稍不注意就会受到很严重的惩罚。失误2次大概就没机会了。
   * 绝对绝命的boss，打败boss需要几次死在它刀下的经验。boss有20%几率会是强化版本。

=====================================================

《美术第二版的需求》

*可以试着开始弄的一些美术*

如何制造更defined的美术资源？

武器
  * 武器的图标、玩家手持、合成/升级动画
    武器的美术图标，红橙黄做主要色彩。用水晶用的蓝色，黄色作为次要色彩。

敌人单位的色彩调整，对现在敌人单位的颜色不是很满意
  * 调整敌人单位的颜色跟饱和度
  * 选五种颜色作为敌人单位的颜色,注意饱和度。
  * 现在单位颜色偏暗,不是很理想
  * 单位勾线（粉色？蓝色？黑色？黄色？）

玩家动画的调整
  * 玩家行走的动画, 火焰左右移动时的distortion *失败-太复杂* 
  * 玩家攻击的动画, 火焰左右移动时的distortion（更夸张，或者直接闪现成一团被压扁的小火，然后爆裂攻击特效） *失败-太复杂* 
  * 无能量时显示蓝火(火上色的改变)
  * 大护盾
  * 玩家的不可视边界有跳动的边界界限（好似火苗照亮边界的感觉）

战斗时的动画（我方攻击）
  * 敌方受伤跳数字（红白） （可以说明伤害值）*失败-不好看* 
  * 每一种武器范围可以有一个特效 *失败-太复杂* 

战斗时的动画（敌方攻击）
  * 敌方受伤跳数字（黑白） （可以说明伤害值） *失败-不好看* 
  * 敌人攻击的特效（白色）盾击，抓击
  * 护盾的保护

任意单位的移动动画
  * 移动时的快入慢出
  * 敌人与玩家移动之后，在地上留下一点灰尘

痕迹动画
  * 移动过地方的痕迹（会照亮地图的trail，间隔出现的跳动的小火苗） *失败-太复杂* 
  * 杀死过敌人的地方的痕迹（残焰，灼烧2）
  * 武器攻击覆盖过的地方的痕迹（灼烧） *失败-太复杂* 
  * 受伤的怪身上火焰燃烧 *失败-太复杂* 

水晶相关的动画
  * 怪物死后爆裂为水晶( 水晶的爆裂，水晶的散落 ）
  * 收集水晶的动画

=====================================================

《美术第三版的需求》

*让游戏画面动起来，现在感觉上东西大都是静止的*
让水晶，UI，生物，重要的地方都动起来
攻击 受伤 动画 动起来

(主题是火焰)
火焰的冲击 pk的感觉 剑锋的火光 被灼烧的草地，被灼烧的森林

UI的特效
  * 表现出能量护盾，（蓝色流动的液体，蓝紫色，带白色的槽（玻璃感），能够被液体装满）
  * 表现出武器能量的能量槽（白色、黄色条，有金属的锋利感。根据武器的不同或者紫色红色，有魔法的感觉）。
  * 水晶的UI可以和合成按钮整合显示，比如一个装有水晶，或者漂浮的彩色水晶的瓶子。各种颜色的水晶会动来动去，在瓶子里浮动。
  * 打造按钮用锤子显示
  * 充能按钮，hoverover，高亮武器能量条。
  * 很酷的武器合成按钮，武器合成当然很酷。一个魔法球，好像可以融化水晶的水晶球，比如说。红色的炙热火焰。感觉可以聚集能量的按钮。
  
玩家受到伤害后
  * 护盾的保护
  * 水晶的散落
  * 护盾条的减少特效
  
玩家攻击的时候
  * 水晶的散落
  * 攻击的冲击
  * 怪物的受伤
  
=================================================================================

《实验失败的美术风格》 *虽然失败了，但是衍生出了现在以格子为基础，背景采用厚涂的作画方式*

*激进派美术风格*

判断绘画所用的工序与流程，矢量画？勾边？像素？厚涂？
- 背景厚涂（草，水，灰色沙地，沙漠，墓地土，海，矿山内，云之上）
- 景物厚涂（山，森林，残垣断壁，栅栏，断木林，镜子，岛，大石头，矿洞内壁，水晶矿，墓碑，牌子，水瓶，漂流瓶）
  * 可以显得杂乱，从而突出环境的变化性。（更让人感觉游戏地图是随机的）
- 动态单位则用矢量描细边
- 特效与标志
  * 可以用高亮，厚涂
  * 需要是三帧动画
  * 物品的标志，加号，或者很亮的一个点，或者三帧动画的闪闪十字星。
- 战斗特效
  * 需要厚涂
  * 3层叠加复合的击打特效动画5帧（三层分别为：半透明的浅色钝器冲击表现，延长的细长突刺攻击方向的光影表现，挥砍/抓痕/踩踏/爆炸等技能特化的表现）。可以借鉴伊苏2。

确定美术风格，这个估计没什么办法，就我自己的风格吧。

判断场景，与每个场景配色的确定。注意怪物的配色需要能够融入每一个场景。
  * 配色需要在网上找，可以从真实图片种取色，或者从风景画里取色。
  * 考虑更真实的场景配色，可以借鉴rise to ruins，loop hero。

======================================================================

*怎么给玩家更多选择*

《卷轴、徽章、刻印》

《卷轴》
地上会有各种script，script的效果会使玩家按某一pattern行动几回合，然后释 放一个大招/能力。越强的能力，script的步骤越多。
dance！揭露dance的卷轴。卷轴用像素显示步骤。 
- 卷轴：移动2到6格放xxx技能。全屏的地块与单位乱序。对整个房间的攻击 。 
- 开门的舞蹈 
- 回血的舞蹈 
- 火焰冲击的舞蹈 
- 开地图视野的舞蹈 
- 召唤水晶的舞蹈 
- 召唤敌人的舞蹈 
- 舞蹈的威力要非常强 
- 花式攻击，玩家用自己对主角的控制权力替换一次压倒性威力的攻击。
卷轴除了移动跟应急性质的好像都可以。 
卷轴可以属于大招的范畴。威力可以大，可以小。舞蹈的时候，玩家risk相当高。
卷轴也可以大量分布，威力小的卷轴就当作是杂货或者垃圾吧。
选择卷轴之后，玩家可以选择释放方向。然后大致显示卷轴释放后的效果。

《徽章》
不是卷轴，而是徽章。混合舞蹈与水晶花费。徽章最多有三枚。提供玩家取 舍性质的选择。 
徽章最好是攻击或者瞬发性质的，属于应急用的道具。
徽章最多有3~6个。

《刻印》
不是卷轴而是舞蹈刻印，刻印会在无意识中被使用。越多的刻印可能越是容易出现连携，或者失误的情况。
- 比如连续反转方向4次便会加血的刻印。 （摇曳）
- 比如连续折返方向4次便会增加一层硬防御的刻印。（策略）
- 连续沿直线前进则临时增加攻击力的刻印。（冲击） 
刻印最好是防御或者辅助性质的。 
刻印应该是在游戏开始供玩家选择，然后路上会遇到很多，越到后面刻印越强。但是最多只能有2个刻印，可以用新的刻印替换之前的。
  
=====================================================

《游戏菜单》

新增开始菜单，与模式选择菜单。
游戏名
* 清空记录
* 开始新游戏
    模式选择
    * 第零个模式 - 测试模式。
    * 第一代模式 - 大乱斗。把当前模式移动到这边，地图大小16x16。
    * 第二个模式 - 第二代模式-标准模式。
* 履历浏览
* 选项
* 退出

=====================================================